from dataclasses import dataclass
from datetime import time

@dataclass
class SessionDefinition:
    """
    Определяет стандартное время начала и конца торговой сессии в UTC.
    """
    name: str          # Название сессии (например, "Asia", "Europe_London", "USA_NewYork")
    start_time_utc: time  # Время открытия сессии по UTC
    end_time_utc: time    # Время закрытия сессии по UTC
    # Можно добавить биржу или регион, если это важно для уникальности

# Примеры определения сессий (это можно будет вынести в конфигурацию или отдельный файл позже)
# Важно: Это очень примерные и обобщенные времена. Реальные сессии могут пересекаться
# и иметь более сложные правила (например, летнее/зимнее время, праздники).
# Для точного анализа нужны будут более детальные данные о конкретных биржах.

# Упрощенные примеры для демонстрации:
ASIA_SESSION = SessionDefinition("Asia", time(0, 0), time(9, 0)) # Примерно 00:00 - 09:00 UTC
EUROPE_LONDON_SESSION = SessionDefinition("Europe_London", time(7, 0), time(16, 0)) # Примерно 07:00 - 16:00 UTC (Лондон)
# Франкфурт (GER40/DAX) обычно открывается в 08:00 СЕТ (Central European Time), что соответствует 07:00 UTC зимой или 06:00 UTC летом.
# Закрывается в 17:30 СЕТ (16:30 UTC / 15:30 UTC летом).
# Xetra (основная площадка DAX) имеет торговые часы с 09:00 до 17:30 CET.
# Это значит, что для GER40 нам нужны более точные определения, учитывающие биржу.

# Для DAX (XETRA), официальные часы 09:00 - 17:30 CET.
# Зимой CET = UTC+1, Летом (CEST) = UTC+2
# Это значит:
#   Зима: 08:00 - 16:30 UTC
#   Лето: 07:00 - 15:30 UTC
# Для простоты пока определим "основные" европейские часы, которые могут покрывать часть активности
# но для точного анализа GER40 нужно будет учитывать эти нюансы и, возможно, летнее время.
EUROPE_FRANKFURT_MAIN_SESSION = SessionDefinition("Europe_Frankfurt_Xetra", time(8,0), time(16,30)) # Основные часы Xetra в UTC (если считать CET = UTC+1)

USA_NEWYORK_SESSION = SessionDefinition("USA_NewYork", time(13, 30), time(20, 0)) # Примерно 13:30 - 20:00 UTC (Нью-Йорк)

# Словарь для быстрого доступа к определениям сессий
# Это можно расширять и загружать из конфигурационного файла
SUPPORTED_SESSIONS = {
    "asia": ASIA_SESSION,
    "london": EUROPE_LONDON_SESSION,
    "frankfurt": EUROPE_FRANKFURT_MAIN_SESSION, # Упрощенно для Xetra
    "newyork": USA_NEWYORK_SESSION,
}

# TODO:
# 1. Рассмотреть добавление информации о часовом поясе биржи и автоматический учет летнего/зимнего времени (DST).
#    Библиотеки вроде `pytz` и `zoneinfo` могут помочь.
# 2. Подумать о том, как обрабатывать сессии, которые пересекают полночь UTC (например, сессия в Сиднее).
# 3. Для анализа конкретного инструмента (например, GER40) нужно будет знать, на какой бирже он торгуется
#    и каковы ее точные торговые часы, включая перерывы, если они есть. 